(function(d){d.fancybox.helpers.thumbs={defaults:{width:50,height:50,position:"bottom",source:function(b){var a;b.element&&(a=d(b.element).find("img").attr("src"));!a&&"image"===b.type&&b.href&&(a=b.href);return a}},wrap:null,list:null,width:0,init:function(b,a){var l=this,c,g=b.width,h=b.height,m=b.source;c="";for(var e=0;e<a.group.length;e++)c+='<li><a style="width:'+g+"px;height:"+h+'px;" href="javascript:jQuery.fancybox.jumpto('+e+');"></a></li>';this.wrap=d('<div id="fancybox-thumbs"></div>').addClass(b.position).appendTo("body");
this.list=d("<ul>"+c+"</ul>").appendTo(this.wrap);d.each(a.group,function(b){var c=m(a.group[b]);c&&d("<img />").load(function(){var a=this.width,f=this.height,c,k,e;l.list&&a&&f&&(c=a/g,k=f/h,e=l.list.children().eq(b).find("a"),1<=c&&1<=k&&(c>k?(a=Math.floor(a/k),f=h):(a=g,f=Math.floor(f/c))),d(this).css({width:a,height:f,top:Math.floor(h/2-f/2),left:Math.floor(g/2-a/2)}),e.width(g).height(h),d(this).hide().appendTo(e).fadeIn(300))}).attr("src",c)});this.width=this.list.children().eq(0).outerWidth(!0);
this.list.width(this.width*(a.group.length+1)).css("left",Math.floor(.5*d(window).width()-(a.index*this.width+.5*this.width)))},beforeLoad:function(b,a){2>a.group.length?a.helpers.thumbs=!1:a.margin["top"===b.position?0:2]+=b.height+15},afterShow:function(b,a){if(this.list)this.onUpdate(b,a);else this.init(b,a);this.list.children().removeClass("active").eq(a.index).addClass("active")},onUpdate:function(b,a){this.list&&this.list.stop(!0).animate({left:Math.floor(.5*d(window).width()-(a.index*this.width+
.5*this.width))},150)},beforeClose:function(){this.wrap&&this.wrap.remove();this.list=this.wrap=null;this.width=0}}})(jQuery);